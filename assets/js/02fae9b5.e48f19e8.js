"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[331],{76647:function(e,r,t){t.r(r),t.d(r,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return u}});var i=t(87462),n=t(63366),o=(t(67294),t(3905)),a=["components"],s={},l=void 0,d={type:"mdx",permalink:"/Axis/",source:"@site/pages/index.md"},p=[{value:"Provider Example",id:"provider-example",children:[],level:2},{value:"Using multiple providers",id:"using-multiple-providers",children:[],level:2},{value:"Extensions",id:"extensions",children:[],level:2},{value:"Memory categories",id:"memory-categories",children:[],level:2}],c={toc:p};function u(e){var r=e.components,t=(0,n.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},c,t,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/Sleitnick/Axis/actions/workflows/ci.yaml"},(0,o.kt)("img",{parentName:"a",src:"https://github.com/Sleitnick/Axis/actions/workflows/ci.yaml/badge.svg",alt:"CI"})),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Sleitnick/Axis/actions/workflows/cd.yaml"},(0,o.kt)("img",{parentName:"a",src:"https://github.com/Sleitnick/Axis/actions/workflows/cd.yaml/badge.svg",alt:"CD"})),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Sleitnick/Axis/actions/workflows/docs.yaml"},(0,o.kt)("img",{parentName:"a",src:"https://github.com/Sleitnick/Axis/actions/workflows/docs.yaml/badge.svg",alt:"Docs"}))),(0,o.kt)("h1",{id:"axis"},"Axis"),(0,o.kt)("p",null,"Axis is a provider framework for the Roblox ecosystem."),(0,o.kt)("h2",{id:"provider-example"},"Provider Example"),(0,o.kt)("p",null,"Providers are simply tables with a name and a couple lifecycle methods."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local MyProvider = {}\n\nfunction MyProvider:AxisPrepare()\n    print("Prepare the provider")\nend\n\nfunction MyProvider:AxisStarted()\n    print("Started")\nend\n\nreturn MyProvider\n')),(0,o.kt)("p",null,"Providers must be explicitly added into Axis via ",(0,o.kt)("inlineCode",{parentName:"p"},"Axis:AddProvider()"),". Once all providers are added, ",(0,o.kt)("inlineCode",{parentName:"p"},"Axis:Start()")," will kick off the lifecycle methods of the providers."),(0,o.kt)("p",null,"A script to bootstrap Axis might look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local Axis = require(somewhere.Axis)\nlocal MyProvider = require(somewhere.MyProvider)\n\nAxis:AddProvider(MyProvider)\n\nAxis:Start()\n")),(0,o.kt)("h2",{id:"using-multiple-providers"},"Using multiple providers"),(0,o.kt)("p",null,"Because providers are just tables, it is easy for one provider to use another. Simply get a reference to the other provider (e.g. requiring its ModuleScript) and then access it after AxisStarted has fired. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"local MyProvider = require(somewhere.MyProvider) -- Grab the other provider\n\nlocal AnotherProvider = {}\n\nfunction AnotherProvider:AxisPrepare()\n    -- Other providers are NOT safe to use here, because there's no guarantee\n    -- that they have all been prepared yet. Wait until AxisStarted.\nend\n\nfunction AnotherProvider:AxisStarted()\n    -- Other providers are safe to use once the AxisStarted method fires.\n    MyProvider:DoSomething()\nend\n")),(0,o.kt)("h2",{id:"extensions"},"Extensions"),(0,o.kt)("p",null,"Axis providers are very simple. In order to expand the possibilities of providers, extensions can be added. Extensions can be added at the Axis level (e.g. apply to all providers) or at the individual provider level."),(0,o.kt)("p",null,"Extensions allow code to run for a provider before certain lifecycle methods. This can be used to transform, inject, create networking, or do whatever is required to set up the providers for certain use-cases."),(0,o.kt)("p",null,"Below is an example of a simple logger extension:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local Axis = require(somewhere.Axis)\n\nAxis:AddExtension {\n    -- Assumes that a custom \'Name\' field has been added to all providers:\n    BeforePrepare = function(provider)\n        print("Preparing provider", provider.Name)\n    end,\n    BeforeStarted = function(provider)\n        print("Starting provider", provider.Name)\n    end,\n}\n')),(0,o.kt)("p",null,"Here is a similar example, but on a provider:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local MyProvider = {}\n\nMyProvider.AxisExtensions = {\n    {\n        BeforePrepare = function(provider)\n            print("BeforePrepare MyProvider")\n        end,\n        BeforeStarted = function(provider)\n            print("BeforeStarted MyProvider")\n        end,\n    },\n}\n')),(0,o.kt)("p",null,"Extensions will run in the order of which they were added. Axis-level extensions run before provider-level extensions."),(0,o.kt)("h2",{id:"memory-categories"},"Memory categories"),(0,o.kt)("p",null,"Because Axis providers are started from one source, the default memory label within the Developer Console will appear the same for all providers. To solve this, Axis will automatically assign a memory category if the ",(0,o.kt)("inlineCode",{parentName:"p"},"AxisName")," field is set."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},'local MyProvider = {}\n\nMyProvider.AxisName = "MyProvider"\n')),(0,o.kt)("p",null,"When MyProvider is prepared/started, any memory usage will show up within the MyProvider label in the Developer Console memory section."),(0,o.kt)("p",null,"If the script being used to bootstrap Axis is grabbing each provider from its own ModuleScript, then a simple way to inject this is to set the ",(0,o.kt)("inlineCode",{parentName:"p"},"AxisName")," property to the ModuleScript's name. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-lua"},"for _,module in ipairs(somewhere.MyProviderModules:GetChildren()) do\n    local provider = require(module)\n    provider.AxisName = module.Name -- Inject name\n    Axis:AddProvider(provider)\nend\n")))}u.isMDXComponent=!0}}]);