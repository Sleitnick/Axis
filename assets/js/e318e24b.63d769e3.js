"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[819],{26596:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return a},metadata:function(){return d},toc:function(){return p},default:function(){return x}});var i=t(87462),o=t(63366),r=(t(67294),t(3905)),s=["components"],l={sidebar_position:3},a="Extensions",d={unversionedId:"extensions",id:"extensions",isDocsHomePage:!1,title:"Extensions",description:"Extensions allow the capabilities of providers to be expanded. By tying into the lifecycle methods of all providers, extensions let developers build upon what providers can do to whatever best fits the given use-cases. For example, an extension could be created to add networking so that communication between providers could exist between the server and client.",source:"@site/docs/extensions.md",sourceDirName:".",slug:"/extensions",permalink:"/Axis/docs/extensions",editUrl:"https://github.com/Sleitnick/Axis/edit/master/docs/extensions.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Providers",permalink:"/Axis/docs/providers"}},p=[{value:"Making an Extension",id:"making-an-extension",children:[],level:2},{value:"Extension Levels",id:"extension-levels",children:[{value:"Axis-level Extensions",id:"axis-level-extensions",children:[],level:3},{value:"Provider-level Extensions",id:"provider-level-extensions",children:[],level:3}],level:2},{value:"Execution Order",id:"execution-order",children:[],level:2},{value:"Examples",id:"examples",children:[{value:"Logging",id:"logging",children:[],level:3},{value:"Player Injection",id:"player-injection",children:[],level:3}],level:2}],c={toc:p};function x(e){var n=e.components,t=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"extensions"},"Extensions"),(0,r.kt)("p",null,"Extensions allow the capabilities of providers to be expanded. By tying into the lifecycle methods of all providers, extensions let developers build upon what providers can do to whatever best fits the given use-cases. For example, an extension could be created to add networking so that communication between providers could exist between the server and client."),(0,r.kt)("h2",{id:"making-an-extension"},"Making an Extension"),(0,r.kt)("p",null,"Extensions are easy to make and run in the context of each provider. At the core, extensions are simply a collection of functions that run before the lifecycle methods of providers. Extensions should be generic (in the sense that they don't care about what the provider does)."),(0,r.kt)("p",null,"A bare-bones extension looks like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local SomeExtension = {}\n\n-- Runs directly before AxisPrepare is called on the provider\nfunction SomeExtension.BeforePrepare(provider)\nend\n\n-- Runs directly before AxisStarted is called on the provider\nfunction SomeExtension.BeforeStarted(provider)\nend\n")),(0,r.kt)("p",null,"The extension functions can then do whatever is necessary to the given ",(0,r.kt)("inlineCode",{parentName:"p"},"provider"),"."),(0,r.kt)("h2",{id:"extension-levels"},"Extension Levels"),(0,r.kt)("p",null,"Extensions can be added at two separate levels."),(0,r.kt)("h3",{id:"axis-level-extensions"},"Axis-level Extensions"),(0,r.kt)("p",null,"Adding extensions at the Axis-level allows extensions to be applied to all providers in Axis."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"Axis:AddExtension(SomeExtension)\n")),(0,r.kt)("h3",{id:"provider-level-extensions"},"Provider-level Extensions"),(0,r.kt)("p",null,"To apply an extension to an individual provider, an extension can be explicitly added to the provider. This is done by listing the extensions in the provider's ",(0,r.kt)("inlineCode",{parentName:"p"},"AxisExtension")," table:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local MyProvider = {}\n\nMyProvider.AxisExtensions = {SomeExtension01, SomeExtension02, ...}\n")),(0,r.kt)("h2",{id:"execution-order"},"Execution Order"),(0,r.kt)("p",null,"Extensions run in the order that they were added. Before a provider lifecycle method is run, all Axis-level extensions (i.e. added with ",(0,r.kt)("inlineCode",{parentName:"p"},"Axis:AddExtension"),") are run. Directly after, all provider-level extensions are run. All extensions are run in series, each one waiting for the previous one to complete. The provider's lifecycle method will not run until all extensions are executed successfully."),(0,r.kt)("p",null,"For example, consider the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local MyProvider = {}\n\nMyProvider.AxisExtensions = {Extension01, Extension02}\n\nAxis:AddExtension(Extension03)\nAxis:AddExtension(Extension04)\n\nAxis:Start()\n\n-- Extensions above will execute in the following order for MyProvider:\n-- 1. Extension03\n-- 2. Extension04\n-- 3. Extension01\n-- 4. Extension02\n")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("h3",{id:"logging"},"Logging"),(0,r.kt)("p",null,"While ",(0,r.kt)("inlineCode",{parentName:"p"},"AxisName")," is optional for providers, here's a simple extension that tries to log out when a provider starts up."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'local LogExtension = {}\n\nfunction LogExtension.BeforePrepare(provider)\n    print("Provider BeforePrepare", provider.AxisName)\nend\n\nfunction LogExtension.BeforeStarted(provider)\n    print("Provider BeforeStarted", provider.AxisName)\nend\n')),(0,r.kt)("h3",{id:"player-injection"},"Player Injection"),(0,r.kt)("p",null,"Injecting the local player into a provider isn't really that useful, but provides an example of property injection to providers. In this example, the extension will set the provider's ",(0,r.kt)("inlineCode",{parentName:"p"},"Player")," property to the LocalPlayer (if it's on the client):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'local Players = game:GetService("Players")\nlocal RunService = game:GetService("RunService")\n\nlocal PlayerInjectionExtension = {}\n\nfunction PlayerInjectionExtension.BeforePrepare(provider)\n    if RunService:IsClient() then\n        provider.Player = Players.LocalPlayer\n    end\nend\n')))}x.isMDXComponent=!0}}]);